<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kairos Community Services Database</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #000000;
            background-color: #efecea;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #005169 0%, #8ac7cb 100%);
            color: #efecea;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .search-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 2px solid #8ac7cb;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #005169;
        }
        
        .form-group select,
        .form-group input {
            padding: 0.75rem;
            border: 2px solid #8ac7cb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background-color: #efecea;
        }
        
        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #005169;
            background-color: white;
        }
        
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }
        
        .checkbox-item:hover {
            background-color: rgba(138, 199, 203, 0.2);
        }
        
        .checkbox-item input {
            margin-right: 0.5rem;
            transform: scale(1.2);
            accent-color: #005169;
        }
        
        .search-btn {
            background: linear-gradient(135deg, #005169 0%, #8ac7cb 100%);
            color: #efecea;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 81, 105, 0.3);
        }
        
        .results-section {
            margin-top: 2rem;
        }
        
        .service-card {
            background: white;
            border: 2px solid #8ac7cb;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .service-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .match-score {
            display: inline-block;
            background: #dcc26a;
            color: #000000;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .service-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #005169;
            margin-bottom: 0.5rem;
        }
        
        .service-details {
            color: #005169;
            margin-bottom: 1rem;
        }
        
        .service-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .tag {
            background: rgba(138, 199, 203, 0.3);
            color: #005169;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        .contact-info {
            background: #efecea;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #dcc26a;
        }
        
        .why-match {
            background: rgba(220, 194, 106, 0.2);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            border-left: 4px solid #dcc26a;
        }
        
        .why-match h4 {
            color: #005169;
            margin-bottom: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kairos Community Services Database</h1>
            <p>Find the right support services for your community members</p>
        </div>
        
        <div class="search-section">
            <h2 style="color: #005169; margin-bottom: 1.5rem;">Client Profile</h2>
            
            <form id="clientForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="age">Age Group</label>
                        <select id="age" name="age">
                            <option value="">Select age group</option>
                            <option value="youth">Under 18</option>
                            <option value="young-adult">18-25</option>
                            <option value="adult">26-45</option>
                            <option value="middle-aged">46-65</option>
                            <option value="senior">65+</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="family">Family Status</label>
                        <select id="family" name="family">
                            <option value="">Select family status</option>
                            <option value="single">Single person</option>
                            <option value="couple">Couple</option>
                            <option value="family">Family with children</option>
                            <option value="single-parent">Single parent</option>
                            <option value="extended">Extended family</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location</label>
                        <select id="location" name="location">
                            <option value="">Select area</option>
                            <option value="central">Central City</option>
                            <option value="riccarton">Riccarton</option>
                            <option value="papanui">Papanui</option>
                            <option value="hornby">Hornby</option>
                            <option value="linwood">Linwood</option>
                            <option value="shirley">Shirley</option>
                            <option value="cashmere">Cashmere</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="transport">Transport Access</label>
                        <select id="transport" name="transport">
                            <option value="">Select transport situation</option>
                            <option value="car">Has reliable car</option>
                            <option value="public">Uses public transport</option>
                            <option value="walking">Walking distance only</option>
                            <option value="assistance">Needs transport assistance</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Primary Support Needs (select all that apply)</label>
                    <div class="checkbox-grid">
                        <div class="checkbox-item">
                            <input type="checkbox" id="emergency-housing" name="needs" value="emergency-housing">
                            <label for="emergency-housing">Emergency Housing</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="long-term-housing" name="needs" value="long-term-housing">
                            <label for="long-term-housing">Long-term Housing</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="rental-assistance" name="needs" value="rental-assistance">
                            <label for="rental-assistance">Rental Assistance</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="crisis-counselling" name="needs" value="crisis-counselling">
                            <label for="crisis-counselling">Crisis Counselling</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="mental-health" name="needs" value="mental-health">
                            <label for="mental-health">Mental Health Support</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="addiction" name="needs" value="addiction">
                            <label for="addiction">Addiction Support</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="job-search" name="needs" value="job-search">
                            <label for="job-search">Job Search Help</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="skills-training" name="needs" value="skills-training">
                            <label for="skills-training">Skills Training</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="healthcare" name="needs" value="healthcare">
                            <label for="healthcare">Healthcare Access</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="legal" name="needs" value="legal">
                            <label for="legal">Legal Assistance</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="financial" name="needs" value="financial">
                            <label for="financial">Financial Support</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="family-support" name="needs" value="family-support">
                            <label for="family-support">Family Support</label>
                        </div>
                    </div>
                </div>
                
                <button type="button" class="search-btn" onclick="searchServices()">Find Matching Services</button>
            </form>
        </div>
        
        <div id="results" class="results-section" style="display: none;">
            <h2 style="color: #005169; margin-bottom: 1rem;">Recommended Services</h2>
            <div id="serviceResults"></div>
        </div>
    </div>
    
    <script>
        // Sample data - Replace this with your actual data source
        const servicesData = [
            {
                name: "Housing First Christchurch",
                location: "central",
                services: ["emergency-housing", "mental-health", "addiction"],
                ageGroups: ["young-adult", "adult", "middle-aged"],
                familyTypes: ["single", "couple"],
                phone: "03-366-0344",
                email: "housing@chch.org.nz",
                address: "123 Cashel Street, Central City",
                hours: "Mon-Fri 9am-5pm",
                transport: ["car", "public", "walking"],
                referralType: "Direct referral accepted",
                waitTime: "Usually responds within 24 hours",
                specializations: ["Housing-related mental health", "Addiction recovery housing"]
            },
            {
                name: "Community Mental Health Services",
                location: "riccarton",
                services: ["mental-health", "crisis-counselling", "addiction"],
                ageGroups: ["adult", "middle-aged", "senior"],
                familyTypes: ["single", "couple", "family"],
                phone: "03-364-4090",
                email: "mentalhealth@cdhb.health.nz",
                address: "456 Riccarton Road, Riccarton",
                hours: "Mon-Fri 8am-6pm, Sat 9am-1pm",
                transport: ["car", "public"],
                referralType: "GP referral preferred",
                waitTime: "2-3 week wait for non-urgent cases",
                specializations: ["Individual counselling", "Group therapy", "Family counselling"]
            },
            {
                name: "Work and Income Support",
                location: "hornby",
                services: ["financial", "job-search", "skills-training"],
                ageGroups: ["young-adult", "adult", "middle-aged"],
                familyTypes: ["single", "couple", "family", "single-parent"],
                phone: "0800-559-009",
                email: "support@workandincome.govt.nz",
                address: "789 Carmen Road, Hornby",
                hours: "Mon-Fri 8:30am-4:30pm",
                transport: ["car", "public"],
                referralType: "Walk-ins welcome",
                waitTime: "Same day appointments available",
                specializations: ["Benefit support", "Job placement", "Training subsidies"]
            }
        ];
        
        function calculateCompatibility(service, clientData) {
            let score = 0;
            let maxScore = 0;
            
            // Service match (40% of total score)
            const serviceWeight = 40;
            const clientNeeds = clientData.needs || [];
            const matchingServices = service.services.filter(s => clientNeeds.includes(s));
            const serviceScore = clientNeeds.length > 0 ? (matchingServices.length / clientNeeds.length) * serviceWeight : 0;
            score += serviceScore;
            maxScore += serviceWeight;
            
            // Age group match (15% of total score)
            const ageWeight = 15;
            if (clientData.age && service.ageGroups.includes(clientData.age)) {
                score += ageWeight;
            }
            maxScore += ageWeight;
            
            // Family type match (10% of total score)
            const familyWeight = 10;
            if (clientData.family && service.familyTypes.includes(clientData.family)) {
                score += familyWeight;
            }
            maxScore += familyWeight;
            
            // Location match (20% of total score)
            const locationWeight = 20;
            if (clientData.location && service.location === clientData.location) {
                score += locationWeight;
            } else if (service.location === "central") {
                score += locationWeight * 0.7; // Central is accessible to most
            }
            maxScore += locationWeight;
            
            // Transport match (15% of total score)
            const transportWeight = 15;
            if (clientData.transport && service.transport.includes(clientData.transport)) {
                score += transportWeight;
            }
            maxScore += transportWeight;
            
            return Math.round((score / maxScore) * 100);
        }
        
        function getMatchReasons(service, clientData) {
            const reasons = [];
            
            const clientNeeds = clientData.needs || [];
            const matchingServices = service.services.filter(s => clientNeeds.includes(s));
            if (matchingServices.length > 0) {
                reasons.push(`Covers ${matchingServices.length} of your primary needs`);
            }
            
            if (clientData.age && service.ageGroups.includes(clientData.age)) {
                reasons.push(`Serves your age group`);
            }
            
            if (clientData.location && service.location === clientData.location) {
                reasons.push(`Located in your area`);
            }
            
            if (service.specializations.length > 0) {
                reasons.push(`Specializes in: ${service.specializations.join(', ')}`);
            }
            
            return reasons;
        }
        
        function formatServices(serviceList) {
            const serviceNames = {
                'emergency-housing': 'Emergency Housing',
                'long-term-housing': 'Long-term Housing',
                'rental-assistance': 'Rental Assistance',
                'crisis-counselling': 'Crisis Counselling',
                'mental-health': 'Mental Health',
                'addiction': 'Addiction Support',
                'job-search': 'Job Search',
                'skills-training': 'Skills Training',
                'healthcare': 'Healthcare',
                'legal': 'Legal Aid',
                'financial': 'Financial Support',
                'family-support': 'Family Support'
            };
            
            return serviceList.map(service => serviceNames[service] || service);
        }
        
        function searchServices() {
            const form = document.getElementById('clientForm');
            const formData = new FormData(form);
            
            const clientData = {
                age: formData.get('age'),
                family: formData.get('family'),
                location: formData.get('location'),
                transport: formData.get('transport'),
                needs: formData.getAll('needs')
            };
            
            // Calculate compatibility scores
            const scoredServices = servicesData.map(service => ({
                ...service,
                score: calculateCompatibility(service, clientData),
                reasons: getMatchReasons(service, clientData)
            }));
            
            // Sort by score (highest first)
            scoredServices.sort((a, b) => b.score - a.score);
            
            // Display results
            displayResults(scoredServices);
        }
        
        function displayResults(services) {
            const resultsDiv = document.getElementById('results');
            const serviceResultsDiv = document.getElementById('serviceResults');
            
            if (services.length === 0) {
                serviceResultsDiv.innerHTML = '<p>No matching services found. Please adjust your criteria.</p>';
                resultsDiv.style.display = 'block';
                return;
            }
            
            let html = '';
            
            services.forEach(service => {
                if (service.score > 30) { // Only show services with reasonable match
                    html += `
                        <div class="service-card">
                            <div class="match-score">${service.score}% Match</div>
                            <div class="service-name">${service.name}</div>
                            <div class="service-details">
                                📍 ${service.address} | ⏰ ${service.hours}
                            </div>
                            
                            <div class="service-tags">
                                ${formatServices(service.services).map(s => `<span class="tag">${s}</span>`).join('')}
                            </div>
                            
                            <div class="contact-info">
                                <strong>Contact:</strong> ${service.phone} | ${service.email}<br>
                                <strong>Access:</strong> ${service.referralType} | ${service.waitTime}
                            </div>
                            
                            ${service.reasons.length > 0 ? `
                                <div class="why-match">
                                    <h4>Why this matches:</h4>
                                    <ul>
                                        ${service.reasons.map(reason => `<li>${reason}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                        </div>
                    `;
                }
            });
            
            if (html === '') {
                html = '<p style="text-align: center; color: #005169;">No high-quality matches found. Consider broadening your criteria or contact Kairos directly for assistance.</p>';
            }
            
            serviceResultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>